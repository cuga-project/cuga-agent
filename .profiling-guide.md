# Profiling Guide

All profiling tools and configurations have been organized in the `profiling/` directory.

## Quick Start

```bash
# Run default experiment (fast vs balanced)
./profiling/run_experiment.sh

# Run with specific configuration
./profiling/run_experiment.sh --config fast_vs_accurate.yaml

# View results in browser
./profiling/serve.sh --open
```

## Documentation

See `profiling/README.md` for complete documentation.

## Directory Structure

```
profiling/
├── run_experiment.sh          # Main entry point
├── serve.sh                   # HTTP server for viewing results
├── bin/                        # Scripts
├── config/                     # YAML configurations
├── experiments/                # Experiment results + HTML viewer
└── reports/                    # Individual profiling reports
```

## Configuration Files

Create YAML configuration files in `profiling/config/` to define experiments:

```yaml
profiling:
  configs: ["settings.openai.toml"]
  modes: ["fast", "balanced"]
  tasks: ["test_get_top_account_by_revenue_stream"]
  runs: 3
  
  langfuse:
    host: "https://cloud.langfuse.com"
    retry:
      max_attempts: 10
      initial_delay: 2.0

experiment:
  name: "my_experiment"
  runs:
    - name: "fast_mode"
      test_id: "settings.openai.toml:fast:test_get_top_account_by_revenue_stream"
      iterations: 3
      output: "experiments/fast_{{timestamp}}.json"
```

## Features

- ✅ YAML-based configuration with Dynaconf
- ✅ CLI arguments override config settings
- ✅ Retry mechanism for Langfuse data fetching (handles propagation delays)
- ✅ Automatic HTML comparison dashboard
- ✅ Environment variable support for credentials

## Environment Setup

Set these in `.env` or export them:

```bash
export LANGFUSE_PUBLIC_KEY="pk-..."
export LANGFUSE_SECRET_KEY="sk-..."
```
